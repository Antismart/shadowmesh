[server]
host = "0.0.0.0"
port = 8081
workers = 4

[cache]
max_size_mb = 500
ttl_seconds = 3600

[rate_limit]
enabled = true
requests_per_second = 100
burst_size = 200

[ipfs]
api_url = "http://127.0.0.1:5001"
timeout_seconds = 30
retry_attempts = 3

[security]
cors_enabled = true
# CORS allowed origins - use specific origins in production!
# Override with SHADOWMESH_SECURITY_ALLOWED_ORIGINS env var
# Example: allowed_origins = ["https://example.com", "https://app.example.com"]
allowed_origins = []
max_request_size_mb = 10

[monitoring]
metrics_enabled = true
health_check_interval_seconds = 30

[circuit_breaker]
# Number of consecutive failures before opening circuit
failure_threshold = 5
# Seconds to wait before testing recovery
reset_timeout_seconds = 30

[deploy]
# Maximum deployment size in MB
max_size_mb = 50

[redis]
# Enable Redis for persistence and distributed rate limiting
# Set to true and provide url for multi-pod deployments
enabled = false
# Redis connection URL (can also use REDIS_URL env var)
# url = "redis://127.0.0.1:6379"
# Key prefix for all ShadowMesh keys
key_prefix = "shadowmesh:"

[telemetry]
# Enable OpenTelemetry distributed tracing
enabled = false
# Jaeger agent endpoint (UDP) - can also use JAEGER_ENDPOINT env var
# jaeger_endpoint = "localhost:6831"
# OTLP endpoint (HTTP/gRPC) - can also use OTEL_EXPORTER_OTLP_ENDPOINT env var
# otlp_endpoint = "http://localhost:4317"
# Service name for tracing
service_name = "shadowmesh-gateway"
# Sampling rate (0.0 to 1.0, 1.0 = 100% of traces)
sample_rate = 1.0

[p2p]
# Enable P2P content resolution from the ShadowMesh peer network
enabled = false
# TCP port for P2P connections
tcp_port = 4001
# Bootstrap peer multiaddrs (empty = rely on compiled-in defaults + mDNS)
# Example: bootstrap_peers = ["/ip4/1.2.3.4/tcp/4001/p2p/12D3KooW..."]
bootstrap_peers = []
# DNS seed domains for bootstrap discovery (TXT records containing multiaddrs)
# dns_seeds = ["_bootstrap.shadowmesh.example.com"]
# Rendezvous peer multiaddrs for namespace-based discovery
# rendezvous_peers = ["/ip4/1.2.3.4/tcp/4001/p2p/12D3KooW..."]
# Enable mDNS for automatic LAN peer discovery
enable_mdns = true
# Timeout for P2P content resolution (seconds)
resolve_timeout_seconds = 15
# Announce gateway content to the DHT so peers can discover it
announce_content = true
